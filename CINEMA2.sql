--DATABASE CREATION
GO
CREATE DATABASE   MOVIE_TICKET_BOOKING
GO

--TABLE 1 [Theaters]
GO
CREATE  TABLE THEATERD9(THEATERID NUMERIC(20) PRIMARY KEY IDENTITY(1,10)  , THEATERNAME VARCHAR(50) NOT NULL,ADDRESSD VARCHAR(100),CITY VARCHAR(10),STATED VARCHAR(10),ZIPCODE VARCHAR(10),CONTACTNO NUMERIC (10) UNIQUE)
GO
INSERT INTO THEATERD VALUES( 'KARPAGAM','7DrRajendraPrasadRd, Gandhipuram','COIMBATORE','TAMILNADU',641012,26784932958)
INSERT INTO THEATERD VALUES( 'Prozone Mall', 'S.F. No, 201,Sathy Rd','COIMBATORE','TAMILNADU',641035,080802111119)
INSERT INTO THEATERD VALUES( 'The Cinema Brookefields', '4th Floor,Brookefields Mall, Krishnaswamy Road','COIMBATORE','TAMILNADU',641001,04442244224)
INSERT INTO THEATERD VALUES( ' Fun Cinemas', 'Avinashi Road, Fun Republic Mall, Peelamedu','COIMBATORE','TAMILNADU',641035,0422211215)
INSERT INTO THEATERD VALUES( 'Maharaja Multiplex', 'Transport Nagar, Inside Maharaja Theme Park,L & T Bye Pass Avinashi Road,','COIMBATORE','TAMILNADU',641035,04226504128)

SELECT * FROM THEATERD

DROP TABLE THEATERD
--TABLE 2
GO 
CREATE TABLE SCREENS9(ScreenID NUMERIC  (30) PRIMARY KEY IDENTITY(1,30),	TheaterID NUMERIC (20) FOREIGN KEY REFERENCES  THEATERD (THEATERID),ScreenNumber NUMERIC(10) NOT NULL,CAPACITY  NUMERIC (10) CHECK(CAPACITY > 0))
GO

INSERT INTO SCREENS VALUES(1,1,5)
INSERT INTO SCREENS VALUES(11,1,5)
INSERT INTO SCREENS VALUES(21,1,5)
INSERT INTO SCREENS VALUES(31,1,5)
INSERT INTO SCREENS VALUES(41,1,5)

SELECT * FROM SCREENS

DROP TABLE SCREENS





--TABLE 3	Movies
GO
CREATE TABLE MOVIES9(MovieID NUMERIC (10) PRIMARY KEY IDENTITY(1,4),TITLE VARCHAR(50) NOT NULL,DURATION NUMERIC (10) CHECK(DURATION>0),LANGUAGE VARCHAR(10),ReleaseDate  DATE,Rating DECIMAL(2,1)  )
GO
INSERT INTO MOVIES VALUES( 'The Shawshank Redemption',2,'ENGLISH','09/01/1994',4)
INSERT INTO MOVIES VALUES( 'The Godfather',2,'ENGLISH','08/12/1965',7)
INSERT INTO MOVIES VALUES( 'The Dark Knight',2,'ENGLISH','2/02/2005',5)
INSERT INTO MOVIES VALUES( ' The Godfather Part II',2,'ENGLISH','03/09/1855',8)
INSERT INTO MOVIES VALUES( ' 12 Angry Men',2,'ENGLISH','11/09/2005',4)
INSERT INTO MOVIES VALUES( 'Inception',2,'ENGLISH','06/28/2017',6)
INSERT INTO MOVIES VALUES( 'The Matrix',2,'ENGLISH','05/27/2004',6)
INSERT INTO MOVIES VALUES( 'Goodfellas',2,'ENGLISH','06/04/1945',8)
INSERT INTO MOVIES VALUES( 'City of God',2,'ENGLISH','05/03/2005',7)
INSERT INTO MOVIES VALUES( ' Its a Wonderful Life',2,'ENGLISH','09/05/1994',4)
INSERT INTO MOVIES VALUES( 'Interstellar',2,'ENGLISH','09/23/2003',5)
INSERT INTO MOVIES VALUES( ' Terminator 2: Judgment Day',2,'ENGLISH','09/12/2010',3)
INSERT INTO MOVIES VALUES( 'The Pianist',2,'ENGLISH','09/10/2023',3)
SELECT * FROM MOVIES



--TABLE 4 	Genres
GO
CREATE TABLE GENRES1 (GENRESID NUMERIC (30) PRIMARY KEY IDENTITY(1,20),GENRENAME VARCHAR(30) UNIQUE)
GO
INSERT INTO GENRES VALUES('Action')
INSERT INTO GENRES VALUES('Adventure')
INSERT INTO GENRES VALUES('Animated ')
INSERT INTO GENRES VALUES('Comedy ')
INSERT INTO GENRES VALUES('Drama ')
INSERT INTO GENRES VALUES('Fantasy ')
INSERT INTO GENRES VALUES('Historical ')
INSERT INTO GENRES VALUES('Horror ')
INSERT INTO GENRES VALUES('Melodrama')
INSERT INTO GENRES VALUES('Musical ')
INSERT INTO GENRES VALUES('Noir')
INSERT INTO GENRES VALUES('Romance ')
SELECT * FROM GENRES


--TABLE 5 	MovieGenres
GO
CREATE TABLE MOVEGEN2(MovieID NUMERIC(10) FOREIGN KEY REFERENCES MOVIES(MovieID),GENRESID NUMERIC(30) FOREIGN KEY REFERENCES GENRES(GENRESID) PRIMARY KEY(MOVIEID,GENRESID) )

GO
INSERT INTO MOVEGEN VALUES(1,1)
INSERT INTO MOVEGEN VALUES(5,21)
INSERT INTO MOVEGEN VALUES(9,41)
INSERT INTO MOVEGEN VALUES(13,61)
INSERT INTO MOVEGEN VALUES(17,81)
INSERT INTO MOVEGEN VALUES(21,101)
INSERT INTO MOVEGEN VALUES(25,121)
INSERT INTO MOVEGEN VALUES(33,141)

SELECT * FROM MOVEGEN


--TABLE 6 ShowTimes
GO
CREATE TABLE SHOW9 (ShowTimeID NUMERIC (30) PRIMARY KEY IDENTITY(1,20),ScreenID NUMERIC(30) FOREIGN KEY REFERENCES SCREENS(ScreenID),MovieID NUMERIC (10) FOREIGN KEY REFERENCES MOVIES(MovieID),ShowDate DATE,StartTime  DATETIME,EndTime DATETIME )
GO

INSERT INTO SHOW VALUES(121,1,'01/02/2024',' 10:34:09',' 10:34:09')
INSERT INTO SHOW VALUES(181,5,'01/03/2025','10:34:09','10:34:09')
INSERT INTO SHOW VALUES(211,13,'04/03/2024','10:34:09','10:34:09')
INSERT INTO SHOW VALUES(241,17,'02/03/2025','10:34:09','10:34:09')
INSERT INTO SHOW VALUES(271,21,'02/09/2023','10:34:09','10:34:09')


SELECT * FROM SHOW


--TABLE  7Customers

GO 
CREATE TABLE CUSTOMERS9(CustomerID NUMERIC (30) PRIMARY KEY IDENTITY(4,6),FirstName VARCHAR(10),LASTNAME VARCHAR(10),Email VARCHAR(50)UNIQUE,PHONE VARCHAR(10)UNIQUE)
GO
INSERT INTO CUSTOMERS VALUES('SAKTHIVEL','A','SAKTHI@GAMIL.COM','6382852345')
INSERT INTO CUSTOMERS VALUES('SANJAY','B','SAN@GMAIL.COM','3434329802')
INSERT INTO CUSTOMERS VALUES('RAM','A','RAM@GAMIL.COM','4567893456')
INSERT INTO CUSTOMERS VALUES('KRISHNA','D','KRISH@GAMIL.COM','3456782345')
INSERT INTO CUSTOMERS VALUES('VASANTH','G','VASANTH@GAMIL.COM','4567238912')
INSERT INTO CUSTOMERS VALUES('VIJAY','S','VJ@GAMIL.COM','4523672345')
INSERT INTO CUSTOMERS VALUES('SANKAR','T','SAN@GAMIL.COM','2345671278')
INSERT INTO CUSTOMERS VALUES('NARENDAR','T','NAN@GAMIL.COM','2343576711')





SELECT* FROM CUSTOMERS



--TABLE 8 BOOKING
GO
CREATE TABLE BOOK9(BookingID NUMERIC (30) PRIMARY KEY IDENTITY(2,7),CustomerID NUMERIC (30) FOREIGN KEY REFERENCES CUSTOMERS(CustomerID),ShowTimeID NUMERIC (30)  FOREIGN KEY REFERENCES SHOW(ShowTimeID ),BookingDate DATETIME DEFAULT GETDATE(),Status1 VARCHAR(10) DEFAULT 'CONFIRMED') 

GO

INSERT INTO BOOK VALUES(4,21,'01/02/2034 10:34:09 ','CONFIRMED')
INSERT INTO BOOK VALUES(10,41,'01/02/2034 10:34:09 ','CONFIRMED')
INSERT INTO BOOK VALUES(16,61,'01/02/2034 10:34:09 ','CONFIRMED')
INSERT INTO BOOK VALUES(22,81,'01/02/2034 10:34:09 ','CONFIRMED')
INSERT INTO BOOK VALUES(28,101,'01/02/2034 10:34:09 ','CONFIRMED')
INSERT INTO BOOK VALUES(34,21,'01/02/2034 10:34:09 ','CONFIRMED')
INSERT INTO BOOK VALUES(34,21,'01/02/2034 10:34:09 ','CONFIRMED')
INSERT INTO BOOK VALUES(40,41,'01/02/2034 10:34:09 ','CONFIRMED')
INSERT INTO BOOK VALUES(46,61,'01/02/2034 10:34:09 ','CONFIRMED')

SELECT * FROM BOOK

--TABLE 9 SEATS
GO
CREATE TABLE SEATING9(SEAT NUMERIC(30)PRIMARY KEY IDENTITY(2,5),ScreenID NUMERIC (30) ,SEATNUMBER VARCHAR(30),SEAtTYPE VARCHAR(30)) 
GO

INSERT INTO SEATING VALUES(121,10,'Normal')
INSERT INTO SEATING VALUES(121,20, 'Premium')
INSERT INTO SEATING VALUES(121,30,'VIP')
INSERT INTO SEATING VALUES(121,10,'Normal')
INSERT INTO SEATING VALUES(121,20, 'Premium')
INSERT INTO SEATING VALUES(121,30,'VIP')

SELECT * FROM SEATING


-- TABLE 10 	BookingSeats

GO 

CREATE TABLE BookingSeats9(	BookingID NUMERIC(30) FOREIGN KEY REFERENCES BOOK (BOOKINGID),SeatID  NUMERIC (30) FOREIGN KEY REFERENCES SEATING(SEAT) PRIMARY KEY(BOOKINGID,SEATID)) 
GO 
INSERT INTO BookingSeats VALUES(9,2)
INSERT INTO BookingSeats VALUES(16,7)
INSERT INTO BookingSeats VALUES(23,12)
INSERT INTO BookingSeats VALUES(30,2)
INSERT INTO BookingSeats VALUES(37,7)
INSERT INTO BookingSeats VALUES(44,12)
INSERT INTO BookingSeats VALUES(51,2)
INSERT INTO BookingSeats VALUES(58,2)
INSERT INTO BookingSeats VALUES(65,7)
INSERT INTO BookingSeats VALUES(72,12)
INSERT INTO BookingSeats VALUES(72,2)

SELECT * FROM BookingSeats


--TABLE 11 PAYMENTS
GO
CREATE TABLE PAY9(PaymentID NUMERIC(30) PRIMARY KEY IDENTITY(1,7),BookingID NUMERIC(30) FOREIGN KEY REFERENCES BOOK(BookingID)UNIQUE,AMOUNT DECIMAL  CHECK(AMOUNT>0),PaymentDate DATETIME,PaymentMethod VARCHAR(30),PaymentStatus VARCHAR(10) DEFAULT 'PENDING')

GO
INSERT INTO PAY  VALUES(9,1000,' 10:34:09','Card','COMPLETED')
INSERT INTO PAY  VALUES(16,200,  '10:34:09','UPI','PENDING')
INSERT INTO PAY  VALUES(23,5000,'10:34:09', 'Cash','COMPLETED')
INSERT INTO PAY  VALUES(30,5000,'10:34:09', 'Cash','COMPLETED')
INSERT INTO PAY  VALUES(37,5000,'10:34:09', 'Cash','COMPLETED')
INSERT INTO PAY  VALUES(44,5000,'10:34:09', 'Cash','COMPLETED')
INSERT INTO PAY  VALUES(51,5000,'10:34:09', 'Cash','COMPLETED')
INSERT INTO PAY  VALUES(58,5000,'10:34:09', 'Cash','COMPLETED')

--TABLE 12 	Staff
GO
CREATE TABLE STAFFD9(StaffID NUMERIC(30) PRIMARY KEY IDENTITY(2,5),TheaterID NUMERIC(20) FOREIGN KEY REFERENCES THEATERD(THEATERID), FirstName VARCHAR(30),LASTNAME VARCHAR(30),ROLE VARCHAR(20),PhoneNumber VARCHAR(20)UNIQUE,	Email VARCHAR(20) UNIQUE)
GO
INSERT INTO STAFFD VALUES(1,'SAKTHI','A','Manager','3456781234','SAKTHI@GAMIL.COM')
INSERT INTO STAFFD VALUES(11,'RAM','D','Cashier','346787923','RAM@GAMIL.COM')
INSERT INTO STAFFD VALUES(21,'SHAM','H','MANAGER','453467823','SHAM@GAMIL.COM')
INSERT INTO STAFFD VALUES(31,'SENTHIL','R','MANAGER','34763416','SEN@GAMIL.COM')
INSERT INTO STAFFD VALUES(41,'KAVIN','A','CASHIER','3467343900','KAVIN@GAMIL.COM')


SELECT * FROM STAFFD


--TABLE 13 	Feedback
GO
CREATE TABLE FEEDBACK9(FeedbackID NUMERIC(30)PRIMARY KEY IDENTITY(3,5),CustomerID NUMERIC(30) FOREIGN KEY REFERENCES CUSTOMERS(CustomerID),MOVIE NUMERIC(10) FOREIGN KEY REFERENCES MOVIES(MOVIEID),COMMENTS VARCHAR(30))

GO

INSERT INTO FEEDBACK VALUES(4,1,'NOTHING')
INSERT INTO FEEDBACK VALUES(10,5,'NOTHING')
INSERT INTO FEEDBACK VALUES(16,9,'NOTHING')
INSERT INTO FEEDBACK VALUES(22,13,'NOTHING')
INSERT INTO FEEDBACK VALUES(28,17,'NOTHING')
INSERT INTO FEEDBACK VALUES(34,21,'NOTHING')
INSERT INTO FEEDBACK VALUES(40,25,'NOTHING')
INSERT INTO FEEDBACK VALUES(46,33,'NOTHING')

SELECT * FROM FEEDBACK

--TABLE 14.	LoginUsers
GO

CREATE TABLE LOGIN9(UserID NUMERIC(30)PRIMARY KEY IDENTITY(2,4),USERNAME VARCHAR(30),PASSWORD VARCHAR(30),ROLE VARCHAR(30),LASTLOGIN DATETIME DEFAULT NULL)

GO

INSERT INTO LOGIN VALUES('SAKTHIVEL','MYSQLPASS','Admin',' 10:34:09')
INSERT INTO LOGIN VALUES('SANJAY','MYPASS','Staff',' 10:34:09')
INSERT INTO LOGIN VALUES('RAMAN','HELLO','Customer','10:34:09')


SELECT * FROM LOGIN

